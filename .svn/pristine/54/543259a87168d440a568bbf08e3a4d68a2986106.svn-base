#pragma strict

private var timer = 0.0;
var growSpeed = 10.0;
var maxSize = 10.0;
var rotateSpeed = 10.0;
private var player : GameObject;

function Start () {
	player = GameObject.Find("Player");
}

function Update () {
	transform.position = player.transform.position;
	transform.position.y -= 1.0;
	transform.localScale = Vector3(timer,timer/1.6,timer);
	transform.Rotate(0, rotateSpeed*Time.deltaTime, 0);
	renderer.material.color.a = 0.5 - (0.5 * timer/maxSize);
	
	if (timer > 0.0)
		timer += growSpeed * Time.deltaTime;
		
	if (timer > maxSize/2.0)
		player.GetComponent(ThirdPersonController).StopPushing();
	
	if (timer > maxSize)
		timer = 0.0;
}

function Trigger() {
	timer += 0.01;
}